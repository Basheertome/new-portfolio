function mouseX(event,that){return Math.floor((event.pageX-that.offset().left)/300*18)-1}function hoverxo(id){for(i=0;i<hoverx.length;i++)if(hoverx[i][0]===id)return hoverx[i][1]}function hoverxi(id,number){for(i=0;i<hoverx.length;i++)if(hoverx[i][0]===id)return hoverx[i][1]=number,number;return null}function goPresent(thumbnails){if($("body").addClass("present"),!($(".centered-btns").length>0)&&$(".slideshow").length>0&&($(".slideshow").waypoint("destroy"),startSlides($(".slideshow"))),$("html").css("background-color","#000"),"ontouchstart"in document.documentElement){for(var a=document.getElementsByTagName("a"),i=0;i<a.length;i++)a[i].onclick=function(){return window.location=this.getAttribute("href"),!1};$.getScript("../assets/js/fastclick.js",function(){FastClick.attach(document.body)}),$("body").append('<span class="toptouch"></span><span class="lefttouch"></span><span class="righttouch"></span><span class="bottomtouch"></span><span class="tlcornertouch"></span><span class="trcornertouch"></span>'),$(".toptouch").click(function(e){$(document).trigger({type:"keydown",which:13,keyCode:38})}),$(".lefttouch").click(function(e){$(document).trigger({type:"keydown",which:13,keyCode:37})}),$(".righttouch").click(function(e){$(document).trigger({type:"keydown",which:13,keyCode:39})}),$(".bottomtouch").click(function(e){$(document).trigger({type:"keydown",which:13,keyCode:40})}),$(".tlcornertouch").click(function(e){$(document).trigger({type:"keydown",which:13,keyCode:13})}),$(".trcornertouch").click(function(e){$(document).trigger({type:"keydown",which:13,keyCode:27})})}$(".next a").attr("href",$(".next a").attr("href")+"#present"),$(".previous a").attr("href",$(".previous a").attr("href")+"#present"),$(".thumbnails a").each(function(i,item){$(item).attr("href",$(item).attr("href")+"#present")}),$("body, html").animate({scrollTop:0,scrollLeft:0}),$(window).blur(function(){function focusit(){document.activeElement&&(document.activeElement.blur(),clearInterval(focusit))}setInterval(focusit,100)}),$(window).bind("touchmove",function(e){e.preventDefault()}),$(window).on("mousewheel DOMMouseScroll",function(e){e.preventDefault()}),(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")||"ontouchstart"in document.documentElement)&&$("body.present .page section").css("overflow","scroll"),$(document).keydown(function(e){$("section").length>0?(slide=Math.floor(($("body").scrollLeft()+$("html").scrollLeft())/$(window).width())-1,(32==e.keyCode||39==e.keyCode)&&(e.preventDefault(),$("section").length-1>slide&&$("body, html").animate({scrollLeft:$($("section")[slide+1]).offset().left})),37==e.keyCode&&(e.preventDefault(),0==slide?$("body, html").animate({scrollLeft:0}):slide>0&&$("body, html").animate({scrollLeft:$($("section")[slide-1]).offset().left})),38==e.keyCode&&(e.preventDefault(),$("body > .previous a").length>0?$("body > .previous a")[0].click():window.location="/#projects-present"),40==e.keyCode&&(e.preventDefault(),$("body > .next a").length>0?$("body > .next a")[0].click():window.location="/#projects-present"),27==e.keyCode&&window.location.hash.length>0&&(window.location=window.location.hash.split("#")[0]),13==e.keyCode&&(window.location="/#projects-present")):(37==e.keyCode&&$("body").scrollLeft()+$("html").scrollLeft()>100&&$("body, html").animate({scrollLeft:0}),(32==e.keyCode||39==e.keyCode)&&(e.preventDefault(),$("body, html").animate({scrollLeft:$(".intro").width()})),38==e.keyCode&&(e.preventDefault(),window.location="/bitsnbobs/#present"),40==e.keyCode&&(e.preventDefault(),window.location="/hue/#present"),27==e.keyCode&&(window.location="/"))}),slide=-1,$(window).resize(function(){resizeTransform()}),resizeTransform(),thumbnails&&$("body, html").animate({scrollLeft:$(".intro").width()}),"present"!=window.location.hash.split("#")[1]&&(window.location.hash="present")}function resizeTransform(){if($("section").length>0){if($(".top").height()>$(window).height()){var margin=$(window).height()-$(".top").height();$(".top-image").css({"margin-top":margin+"px"}),$(".top").css({"padding-bottom":"50px"})}else $(".top").css("height","100vh");$("section").each(function(i,item){if($(item).has(".columns").length>0){var resized=$(item).width()/$(item).find(".columns").width()*.8;$(item).find("article").css({"-webkit-transform":"translateY(-50%) scale("+resized+")","-moz-transform":"translateY(-50%) scale("+resized+")",transform:"translateY(-50%) scale("+resized+")"})}if($(item).has(".video").length>0){var resized=$(item).width()/900;$(item).find(".description").css({"-webkit-transform":"scale("+resized+")","-moz-transform":"scale("+resized+")",transform:"scale("+resized+")"})}}),-1==slide?$("body, html").animate({scrollLeft:0}):slide>-1&&$("body, html").animate({scrollLeft:$($("section")[slide]).offset().left})}else{var bioscale=$(window).width()/1e3;$(".firefly, .bio").css({"-webkit-transform":"scale("+bioscale+")","-moz-transform":"scale("+bioscale+")",transform:"scale("+bioscale+")"});var resized=$(window).height()/$(".wrapper").height()*.9;$(".page").css({"-webkit-transform":"translateY(-50%) scale("+resized+")","-moz-transform":"translateY(-50%) scale("+resized+")",transform:"translateY(-50%) scale("+resized+")"})}}$(document).ready(function(){"ontouchstart"in document.documentElement&&$("html").addClass("touch"),hoverx=new Array($(".thumbnails").find("a").length);for(var i=0;i<hoverx.length;i++)hoverx[i]=[$(".thumbnails").find("a").eq(i).attr("href"),8];$(".thumbnails a .thumbimage").mouseover(function(event){hoverg=mouseX(event,$(this))}),$(".thumbnails a .thumbimage").mousemove(function(event){var name=$(this).parent().attr("href"),x=mouseX(event,$(this));x>hoverg?(hoverxi(name,hoverxo(name)+1),hoverg=x):x<hoverg&&(hoverxi(name,hoverxo(name)-1),hoverg=x),hoverxo(name)<0?hoverxi(name,0):hoverxo(name)>18&&hoverxi(name,18),$(this).css({"background-position":-300*hoverxo(name)})}),$(".header h1 a").hover(function(){$(window).on("keydown",function(e){27==e.keyCode&&(e.preventDefault(),goPresent())})},function(){$(window).off("keydown")}),"present"==window.location.hash.split("#")[1]?goPresent():"projects-present"==window.location.hash.split("#")[1]&&goPresent("projects")});