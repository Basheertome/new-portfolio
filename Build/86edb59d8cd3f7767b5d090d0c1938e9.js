// Generated by CoffeeScript 1.6.2
/*
jQuery Waypoints - v2.0.3
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++){if(e in this&&this[e]===t)return e}return-1},e=[].slice;(function(t,e){if(typeof define==="function"&&define.amd){return define("waypoints",["jquery"],function(n){return e(n,t)})}else{return e(t.jQuery,t)}})(this,function(n,r){var i,o,l,s,f,u,a,c,h,d,p,y,v,w,g,m;i=n(r);c=t.call(r,"ontouchstart")>=0;s={horizontal:{},vertical:{}};f=1;a={};u="waypoints-context-id";p="resize.waypoints";y="scroll.waypoints";v=1;w="waypoints-waypoint-ids";g="waypoint";m="waypoints";o=function(){function t(t){var e=this;this.$element=t;this.element=t[0];this.didResize=false;this.didScroll=false;this.id="context"+f++;this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()};this.waypoints={horizontal:{},vertical:{}};t.data(u,this.id);a[this.id]=this;t.bind(y,function(){var t;if(!(e.didScroll||c)){e.didScroll=true;t=function(){e.doScroll();return e.didScroll=false};return r.setTimeout(t,n[m].settings.scrollThrottle)}});t.bind(p,function(){var t;if(!e.didResize){e.didResize=true;t=function(){n[m]("refresh");return e.didResize=false};return r.setTimeout(t,n[m].settings.resizeThrottle)}})}t.prototype.doScroll=function(){var t,e=this;t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(c&&(!t.vertical.oldScroll||!t.vertical.newScroll)){n[m]("refresh")}n.each(t,function(t,r){var i,o,l;l=[];o=r.newScroll>r.oldScroll;i=o?r.forward:r.backward;n.each(e.waypoints[t],function(t,e){var n,i;if(r.oldScroll<(n=e.offset)&&n<=r.newScroll){return l.push(e)}else if(r.newScroll<(i=e.offset)&&i<=r.oldScroll){return l.push(e)}});l.sort(function(t,e){return t.offset-e.offset});if(!o){l.reverse()}return n.each(l,function(t,e){if(e.options.continuous||t===l.length-1){return e.trigger([i])}})});return this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}};t.prototype.refresh=function(){var t,e,r,i=this;r=n.isWindow(this.element);e=this.$element.offset();this.doScroll();t={horizontal:{contextOffset:r?0:e.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:e.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?n[m]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return n.each(t,function(t,e){return n.each(i.waypoints[t],function(t,r){var i,o,l,s,f;i=r.options.offset;l=r.offset;o=n.isWindow(r.element)?0:r.$element.offset()[e.offsetProp];if(n.isFunction(i)){i=i.apply(r.element)}else if(typeof i==="string"){i=parseFloat(i);if(r.options.offset.indexOf("%")>-1){i=Math.ceil(e.contextDimension*i/100)}}r.offset=o-e.contextOffset+e.contextScroll-i;if(r.options.onlyOnScroll&&l!=null||!r.enabled){return}if(l!==null&&l<(s=e.oldScroll)&&s<=r.offset){return r.trigger([e.backward])}else if(l!==null&&l>(f=e.oldScroll)&&f>=r.offset){return r.trigger([e.forward])}else if(l===null&&e.oldScroll>=r.offset){return r.trigger([e.forward])}})})};t.prototype.checkEmpty=function(){if(n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)){this.$element.unbind([p,y].join(" "));return delete a[this.id]}};return t}();l=function(){function t(t,e,r){var i,o;r=n.extend({},n.fn[g].defaults,r);if(r.offset==="bottom-in-view"){r.offset=function(){var t;t=n[m]("viewportHeight");if(!n.isWindow(e.element)){t=e.$element.height()}return t-n(this).outerHeight()}}this.$element=t;this.element=t[0];this.axis=r.horizontal?"horizontal":"vertical";this.callback=r.handler;this.context=e;this.enabled=r.enabled;this.id="waypoints"+v++;this.offset=null;this.options=r;e.waypoints[this.axis][this.id]=this;s[this.axis][this.id]=this;i=(o=t.data(w))!=null?o:[];i.push(this.id);t.data(w,i)}t.prototype.trigger=function(t){if(!this.enabled){return}if(this.callback!=null){this.callback.apply(this.element,t)}if(this.options.triggerOnce){return this.destroy()}};t.prototype.disable=function(){return this.enabled=false};t.prototype.enable=function(){this.context.refresh();return this.enabled=true};t.prototype.destroy=function(){delete s[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};t.getWaypointsByElement=function(t){var e,r;r=n(t).data(w);if(!r){return[]}e=n.extend({},s.horizontal,s.vertical);return n.map(r,function(t){return e[t]})};return t}();d={init:function(t,e){var r;if(e==null){e={}}if((r=e.handler)==null){e.handler=t}this.each(function(){var t,r,i,s;t=n(this);i=(s=e.context)!=null?s:n.fn[g].defaults.context;if(!n.isWindow(i)){i=t.closest(i)}i=n(i);r=a[i.data(u)];if(!r){r=new o(i)}return new l(t,r,e)});n[m]("refresh");return this},disable:function(){return d._invoke(this,"disable")},enable:function(){return d._invoke(this,"enable")},destroy:function(){return d._invoke(this,"destroy")},prev:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){if(e>0){return t.push(n[e-1])}})},next:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){if(e<n.length-1){return t.push(n[e+1])}})},_traverse:function(t,e,i){var o,l;if(t==null){t="vertical"}if(e==null){e=r}l=h.aggregate(e);o=[];this.each(function(){var e;e=n.inArray(this,l[t]);return i(o,e,l[t])});return this.pushStack(o)},_invoke:function(t,e){t.each(function(){var t;t=l.getWaypointsByElement(this);return n.each(t,function(t,n){n[e]();return true})});return this}};n.fn[g]=function(){var t,r;r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[];if(d[r]){return d[r].apply(this,t)}else if(n.isFunction(r)){return d.init.apply(this,arguments)}else if(n.isPlainObject(r)){return d.init.apply(this,[null,r])}else if(!r){return n.error("jQuery Waypoints needs a callback function or handler option.")}else{return n.error("The "+r+" method does not exist in jQuery Waypoints.")}};n.fn[g].defaults={context:r,continuous:true,enabled:true,horizontal:false,offset:0,triggerOnce:false};h={refresh:function(){return n.each(a,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return(t=r.innerHeight)!=null?t:i.height()},aggregate:function(t){var e,r,i;e=s;if(t){e=(i=a[n(t).data(u)])!=null?i.waypoints:void 0}if(!e){return[]}r={horizontal:[],vertical:[]};n.each(r,function(t,i){n.each(e[t],function(t,e){return i.push(e)});i.sort(function(t,e){return t.offset-e.offset});r[t]=n.map(i,function(t){return t.element});return r[t]=n.unique(r[t])});return r},above:function(t){if(t==null){t=r}return h._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){if(t==null){t=r}return h._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){if(t==null){t=r}return h._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){if(t==null){t=r}return h._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(t,e){return d[t]=e},_invoke:function(t){var e;e=n.extend({},s.vertical,s.horizontal);return n.each(e,function(e,n){n[t]();return true})},_filter:function(t,e,r){var i,o;i=a[n(t).data(u)];if(!i){return[]}o=[];n.each(i.waypoints[e],function(t,e){if(r(i,e)){return o.push(e)}});o.sort(function(t,e){return t.offset-e.offset});return n.map(o,function(t){return t.element})}};n[m]=function(){var t,n;n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[];if(h[n]){return h[n].apply(null,t)}else{return h.aggregate.call(null,n)}};n[m].settings={resizeThrottle:100,scrollThrottle:30};return i.load(function(){return n[m]("refresh")})})}).call(this);



;



/*global jQuery */
/*jshint multistr:true browser:true */
/*!
* FitVids 1.0.3
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
* Date: Thu Sept 01 18:00:00 2011 -0500
*/

(function( $ ){

  "use strict";

  $.fn.fitVids = function( options ) {
    var settings = {
      customSelector: null
    };

    if ( options ) {
      $.extend( settings, options );
    }

    return this.each(function(){
      var selectors = [
        "iframe[src*='player.vimeo.com']",
        "iframe[src*='youtube.com']",
        "iframe[src*='youtube-nocookie.com']",
        "iframe[src*='kickstarter.com'][src*='video.html']",
        "object",
        "embed"
      ];

      if (settings.customSelector) {
        selectors.push(settings.customSelector);
      }

      var $allVideos = $(this).find(selectors.join(','));
      $allVideos = $allVideos.not("object object"); // SwfObj conflict patch

      $allVideos.each(function(){
        var $this = $(this);
        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }
        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),
            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),
            aspectRatio = height / width;
        if(!$this.attr('id')){
          var videoID = 'fitvid' + Math.floor(Math.random()*999999);
          $this.attr('id', videoID);
        }
        $this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+"%");
        $this.removeAttr('height').removeAttr('width');
      });
    });
  };
// Works with either jQuery or Zepto
})( window.jQuery || window.Zepto );




;



/*! http://responsiveslides.com v1.32 by @viljamis */
(function(d,D,v){d.fn.responsiveSlides=function(h){var b=d.extend({auto:!0,speed:1E3,timeout:4E3,pager:!1,nav:!1,random:!1,pause:!1,pauseControls:!1,prevText:"Previous",nextText:"Next",maxwidth:"",controls:"",namespace:"rslides",before:function(){},after:function(){}},h);return this.each(function(){v++;var e=d(this),n,p,i,k,l,m=0,f=e.children(),w=f.size(),q=parseFloat(b.speed),x=parseFloat(b.timeout),r=parseFloat(b.maxwidth),c=b.namespace,g=c+v,y=c+"_nav "+g+"_nav",s=c+"_here",j=g+"_on",z=g+"_s",
o=d("<ul class='"+c+"_tabs "+g+"_tabs' />"),A={"float":"left",position:"relative"},E={"float":"none",position:"absolute"},t=function(a){b.before();f.stop().fadeOut(q,function(){d(this).removeClass(j).css(E)}).eq(a).fadeIn(q,function(){d(this).addClass(j).css(A);b.after();m=a})};b.random&&(f.sort(function(){return Math.round(Math.random())-0.5}),e.empty().append(f));f.each(function(a){this.id=z+a});e.addClass(c+" "+g);h&&h.maxwidth&&e.css("max-width",r);f.hide().eq(0).addClass(j).css(A).show();if(1<
f.size()){if(x<q+100)return;if(b.pager){var u=[];f.each(function(a){a=a+1;u=u+("<li><a href='#' class='"+z+a+"'>"+a+"</a></li>")});o.append(u);l=o.find("a");h.controls?d(b.controls).append(o):e.after(o);n=function(a){l.closest("li").removeClass(s).eq(a).addClass(s)}}b.auto&&(p=function(){k=setInterval(function(){f.stop(true,true);var a=m+1<w?m+1:0;b.pager&&n(a);t(a)},x)},p());i=function(){if(b.auto){clearInterval(k);p()}};b.pause&&e.hover(function(){clearInterval(k)},function(){i()});b.pager&&(l.bind("click",
function(a){a.preventDefault();b.pauseControls||i();a=l.index(this);if(!(m===a||d("."+j+":animated").length)){n(a);t(a)}}).eq(0).closest("li").addClass(s),b.pauseControls&&l.hover(function(){clearInterval(k)},function(){i()}));if(b.nav){c="<a href='#' class='"+y+" prev'>"+b.prevText+"</a><a href='#' class='"+y+" next'>"+b.nextText+"</a>";h.controls?d(b.controls).append(c):e.after(c);var c=d("."+g+"_nav"),B=d("."+g+"_nav.prev");c.bind("click",function(a){a.preventDefault();if(!d("."+j+":animated").length){var c=
f.index(d("."+j)),a=c-1,c=c+1<w?m+1:0;t(d(this)[0]===B[0]?a:c);b.pager&&n(d(this)[0]===B[0]?a:c);b.pauseControls||i()}});b.pauseControls&&c.hover(function(){clearInterval(k)},function(){i()})}}if("undefined"===typeof document.body.style.maxWidth&&h.maxwidth){var C=function(){e.css("width","100%");e.width()>r&&e.css("width",r)};C();d(D).bind("resize",function(){C()})}})}})(jQuery,this,0);



;



$.getScript('http://www.youtube.com/player_api', function() {
	var player;

	function onYouTubePlayerAPIReady() {
		player = new YT.Player('ytplayer');
	}
});



;



$.getScript('http://a.vimeocdn.com/js/froogaloop2.min.js');

$(document).ready(function(){
	if ('ontouchstart' in document.documentElement) {
		$('.video .poster').hide();
		startSlides($('.slideshow'));
	} else {
	    $('.slideshow').waypoint(function() {
			startSlides($(this));
		}, {
			triggerOnce: 'true',
			offset: 'bottom-in-view'
		});
	}

	$('.page').fitVids();
	$('.video .poster').each(function(){
		var that = $(this);
		$(this).next().find('iframe').load(function(){
			var thisVideo = $f($(this)[0]);
			thisVideo.addEvent('ready', function(){
				thisVideo.addEvent('finish', function() {
					that.fadeIn();
				});
			});
		})
	});

	$('.video .poster').click(function(){
		$(this).fadeOut();
		thisVideo = $f($(this).next().find('iframe')[0]);
		if ($(this).next().find('iframe').attr('id') == 'ytplayer') {
			player.playVideo();
		} else {
			thisVideo.api('play');
		}
	});

	$('.header h1 a').hover(function(){
		$(this).html('<span>←</span> Project List');
		$(window).on('keydown', function(e) {
			if (e.keyCode == 27) {
				// Escape
				e.preventDefault();
				goPresent();
			}
		});
	}, function() {
		$(this).html('Basheer Tome');
		$(window).off('keydown');
	});

	if (window.location.hash.split('#')[1] == 'present') {
		goPresent();
	}
});

function startSlides(that) {
	if ($('.slideshow').length > 0) {
		that.responsiveSlides({
			speed: 500,
			pager: true,
			nav: true,
			pause: true,
			pauseControls: true,
			maxwidth: 900,
			namespace: "centered-btns"
		});
	}
}



;



function goPresent(thumbnails) {
	$('body').addClass('present');
	if (!($('.centered-btns').length > 0) && $('.slideshow').length > 0) {
		$('.slideshow').waypoint('destroy');
		startSlides($('.slideshow'));
	}

	$('html').css('background-color', '#000');

	if ('ontouchstart' in document.documentElement) {
		var a=document.getElementsByTagName("a");
		for (var i=0;i<a.length;i++) {
		    a[i].onclick=function() {
		        window.location=this.getAttribute("href");
		        return false
		    }
		}

		$.getScript('../assets/js/fastclick.js', function() {
			FastClick.attach(document.body);
		});

		$('body').append('<span class="toptouch"></span><span class="lefttouch"></span><span class="righttouch"></span><span class="bottomtouch"></span><span class="tlcornertouch"></span><span class="trcornertouch"></span>');
		$('.toptouch').click(function(e) {
			$(document).trigger({type: 'keydown', which: 13, keyCode: 38});
		});
		$('.lefttouch').click(function(e) {
			$(document).trigger({type: 'keydown', which: 13, keyCode: 37});
		});
		$('.righttouch').click(function(e) {
			$(document).trigger({type: 'keydown', which: 13, keyCode: 39});
		});
		$('.bottomtouch').click(function(e) {
			$(document).trigger({type: 'keydown', which: 13, keyCode: 40});
		});
		$('.tlcornertouch').click(function(e) {
			$(document).trigger({type: 'keydown', which: 13, keyCode: 13});
		});
		$('.trcornertouch').click(function(e) {
			$(document).trigger({type: 'keydown', which: 13, keyCode: 27});
		});
	}

	$('.next a').attr('href', $('.next a').attr('href') + '#present');
	$('.previous a').attr('href', $('.previous a').attr('href') + '#present');
	$('.thumbnails a').each(function(i, item) {
		$(item).attr('href', $(item).attr('href') + '#present');
	});

	$('body, html').animate({
		scrollTop: 0,
		scrollLeft: 0
	})

	$(window).blur(function() {
		function focusit(){
		    if (document.activeElement) {
		    	document.activeElement.blur();
		    	clearInterval(focusit);
		    }
		}
		setInterval(focusit, 100);
	});

	$(window).bind('touchmove', function(e) {
			e.preventDefault();
	});

	$(window).on('mousewheel DOMMouseScroll', function(e) {
		e.preventDefault();
	});

	if ((navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) || ('ontouchstart' in document.documentElement)) {
		// For Safari and iOS
		$('body.present .page section').css('overflow', 'scroll');
	}

	$(document).keydown(function(e) {
		if ($('section').length > 0) {
			slide = Math.floor(($('body').scrollLeft() + $('html').scrollLeft()) / $(window).width()) - 1;
			if (e.keyCode == 32 || e.keyCode == 39) {
				// Spacebar or Right Arrow
				e.preventDefault();
				if ($('section').length - 1 > slide) {
					$('body, html').animate({scrollLeft: $($('section')[slide + 1]).offset().left});
				}
			}
			if (e.keyCode == 37) {
				// Left Arrow
				e.preventDefault();
				if (slide == 0) {
					$('body, html').animate({scrollLeft: 0});
				} else if (slide > 0) {
					$('body, html').animate({scrollLeft: $($('section')[slide - 1]).offset().left});
				}
			}
			if (e.keyCode == 38) {
				// Up Arrow
				e.preventDefault();
				if ($('body > .previous a').length > 0) {
					$('body > .previous a')[0].click();
				} else {
					window.location = '/#projects-present';
				}
			}
			if (e.keyCode == 40) {
				// Down Arrow
				e.preventDefault();
				if ($('body > .next a').length > 0) {
					$('body > .next a')[0].click();
				} else {
					window.location = '/#projects-present';
				}
			}
			if (e.keyCode == 27) {
				// Escape
				if (window.location.hash.length > 0) {
					window.location = window.location.hash.split('#')[0];
				}
			}
			if (e.keyCode == 13) {
				// Enter
				window.location = '/#projects-present';
			}
		} else {
			if (e.keyCode == 37) {
				// Left Arrow
				if (($('body').scrollLeft() + $('html').scrollLeft()) > 100) {
					$('body, html').animate({scrollLeft: 0});
				}
			}
			if (e.keyCode == 32 || e.keyCode == 39) {
				// Spacebar or Right Arrow
				e.preventDefault();
				$('body, html').animate({scrollLeft: $('.intro').width()});
			}
			if (e.keyCode == 38) {
				// Up Arrow
				e.preventDefault();
				window.location = '/bitsnbobs/#present';
			}
			if (e.keyCode == 40) {
				// Down Arrow
				e.preventDefault();
				window.location = '/hue/#present';
			}
			if (e.keyCode == 27) {
				// Escape
				window.location = '/';
			}
		}
	});

	slide = -1;

	$(window).resize(function() {
		resizeTransform();
	});
	resizeTransform();

	if (thumbnails) {
		$('body, html').animate({scrollLeft: $('.intro').width()});
	}

	if (window.location.hash.split('#')[1] != 'present') {
		window.location.hash = 'present';
	}
}

function resizeTransform() {
	if ($('section').length > 0) {
		if ($('.top').height() > $(window).height()) {
			var margin = $(window).height() - $('.top').height();
			$('.top-image').css({
				'margin-top': margin + 'px'
			});
			$('.top').css({
				'padding-bottom' : 50 + 'px'
			});
		} else {
			$('.top').css('height', '100vh');
		}

		$('section').each(function(i, item) {
			if ($(item).has('.columns').length > 0) {
				var resized = ($(item).width() / $(item).find('.columns').width()) * 0.8;
				$(item).find('article').css({
					'-webkit-transform': 'translateY(-50%) scale(' + resized + ')',
					'-moz-transform': 'translateY(-50%) scale(' + resized + ')',
					'transform': 'translateY(-50%) scale(' + resized + ')'
				});
			}
			if ($(item).has('.video').length > 0) {
				var resized = $(item).width() / 900;
				$(item).find('.description').css({
					'-webkit-transform': 'scale(' + resized + ')',
					'-moz-transform': 'scale(' + resized + ')',
					'transform': 'scale(' + resized + ')'
				});
			}
		});

		if (slide == -1) {
			$('body, html').animate({scrollLeft: 0});
		} else if (slide > -1) {
			$('body, html').animate({scrollLeft: $($('section')[slide]).offset().left});
		}
	} else {
		var bioscale = $(window).width() / 1000;
		$('.firefly, .bio').css({
			'-webkit-transform': 'scale(' + bioscale + ')',
			'-moz-transform': 'scale(' + bioscale + ')',
			'transform': 'scale(' + bioscale + ')'
		});
		var resized = ($(window).height() / $('.wrapper').height()) * 0.9;
		$('.page').css({
			'-webkit-transform': 'translateY(-50%) scale(' + resized + ')',
			'-moz-transform': 'translateY(-50%) scale(' + resized + ')',
			'transform': 'translateY(-50%) scale(' + resized + ')'
		});
	}
}



;